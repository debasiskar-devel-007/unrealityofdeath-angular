<app-header></app-header>

<div class="mainwrapper dashbordwrapper">
    <div class="new-container">
        <div class="subwrapper">
        <!-- <app-last-login-info></app-last-login-info> -->
            <div class="wrapper">
                <div class="title-wrapper1">
                    <h1>MANAGE CAMPAIGN</h1>
                </div>
                <div class="step-wrapper">
                    <div class="steps step1">
                        <p>Step One: Create Your Campaign<i class="fa fa-plus-circle" aria-hidden="true"></i>
                        </p>
                    </div>
                    <div class="steps step2">
                        <p>Step Two: Copy URL <i class="fa fa-clone" aria-hidden="true"></i>
                        </p>
                    </div>
                </div>
                <div class="title-wrapper2"></div>
                <h1 class="heading_sub_wrp">
                    Unreality of Death Opportunities</h1>
                <ng-container></ng-container>
                <div class="landing-page-wrapper" *ngFor="let data of campaignData; let mainIndex = index; ">
                    
                    <!-- <h1 *ngIf="landingarraylist.betoparedes_access==0">
            Beto Predes Family Opportunities</h1> -->
                    

                    <div class="landing-page-container">
                        <div class="landing-page-left">
                            <div class="img-wrapper">
                                <img [src]="
                                    (data.landing_page_thumbnail?.length > 0) 
                                      ? data.landing_page_thumbnail[0]?.imageUrl 
                                      : 'https://d37pbainmkhx6o.cloudfront.net/timothydesmond-assets/Placeholder_view_vector.svg'
                                  "/>
                            </div>
                        </div>
                        <div class="landing-page-right">
                            <div class="landing-page-right-text">
                                <h2>{{data.landing_page_name}} </h2>
                                <p [innerHTML]="data.landing_page_description"></p>
                            </div>

                            <div class="landing-right-footer">
                                <div class="copy-url-block">
                                    <span 
                                    [matTooltip]="data.landing_page_domain_url+'/'+data.campaign_data[0].split('##~~')[1]" 
                                    (click)="copyToClipboard(selected_campaign_index[mainIndex]!= null?
                                    data.campaign_url[selected_campaign_index[mainIndex]] :
                                    data.campaign_url[0])"
                                    
                                    ><i class="fa fa-chain-broken" aria-hidden="true"></i></span>
                                    <a><strong *ngIf="eventValue"> {{ data.landing_page_domain_url}}/{{eventValue}}
                                        </strong>
                                        <strong *ngIf="!(eventValue)"> 
                                            {{selected_campaign_index[mainIndex]!= null?
                                                data.campaign_url[selected_campaign_index[mainIndex]] :
                                                data.campaign_url[0]}}
                                        </strong>
                                    </a>
                                </div>
                                <div class="select-block">

                                    <mat-form-field>
                                        <mat-label class="label_wrp_main">Select Campaign</mat-label>
                                        <mat-select 
                                        [value]="data.campaign_data[0].split('##~~')[1]" 
                                        (selectionChange)="valuechange(mainIndex)"

                                        [(ngModel)]="data.campaign_data[0].split('##~~')[1]"
                                        >
                                            <ng-container
                                            *ngFor="let campaignData of data.campaign_data
                                            let camapign_index = index
                                            "
                                            >
                                                <mat-option 
                                                (click)="selectedindex(camapign_index,mainIndex)"
                                                [value]="campaignData.split('##~~')[1]">
                                                    {{campaignData.split('##~~')[0]}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-select>
                                    </mat-form-field>


                                </div>
                                <div class="action-block">
                  <a 
                  (click)="copyToClipboard(selected_campaign_index[mainIndex]!= null?
                  data.campaign_url[selected_campaign_index[mainIndex]] :
                  data.campaign_url[0])" 
                  matTooltip="Copy Url"><i class="fa-regular fa-clone fa-rotate-90 fa-2xs"></i></a>
                  <a matTooltip="QR Scanner"><i
                      class="fa fa-qrcode" aria-hidden="true"></i></a>
                  <a matTooltip="Create Campaign" (click)="campaignModal(data.opportunity_id)" [matBadge]="data.campaign_data ? data.campaign_data.length : 1"><i
                      class="fa fa-plus-circle" aria-hidden="true"></i></a>
                  <a matTooltip="Click Count / Conversion Count"><i
                      class="fa fa-bar-chart" aria-hidden="true"></i></a>
                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<app-footer></app-footer>